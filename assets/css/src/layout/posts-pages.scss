/**
 * Posts / Pages
 */

.site-content {
  @include container;

  @include media( $third-break ) {
    padding-left: flex-gutter();
    padding-right: flex-gutter();
  }

  @include media( $sixth-break ) {
    padding-left: 0;
    padding-right: 0;
  }

  .page &,
  .single & {
    display: flex;
    flex-wrap: wrap;

    @include media( $third-break ) {
      //flex-wrap: nowrap;
    }

    .content-area {
      flex: 1 1 100%;

      @include media( $third-break ) {
        flex: 1 1 flex-grid( 8 );

        padding-left: flex-gutter();
        padding-right: flex-gutter();
      }
    }
  }
}

.hentry {
  margin: 0 0 1.5em;
}

.page-content,
.entry-content,
.entry-summary {
  margin: 1.5em 0 0;
}

.page-links {
  clear: both;
  margin: 0 0 1.5em;
}

.entry-hero {
  a,
  p {
    display: block;
    margin: 0;

    line-height: 0;
  }
}

/* Excerpted Posts */
.excerpted-post {
  display: flex;
  flex-wrap: nowrap;

  margin-bottom: 2em;
  padding-bottom: 2em;

  background-color: color( white );

  border-bottom: 1px solid color( red );

  &:last-of-type {
    margin-bottom: 1.5em;
  }

  &.promotion {
    padding-bottom: 1em;
  }

  &:nth-of-type(2):not(
    .archive.paged .excerpted-post,
    .tribe-events-loop .type-tribe_events,
    .more_features-posts .excerpted-post,
    .events-posts.home-posts .excerpted-post
  ) {
    padding-top: 2em;

    border-top: 1px solid color( red );
  }

  .archive.paged & {
    margin-bottom: 1em;
    padding-bottom: 1em;
  }

  &.has-post-img {
    .entry-excerpt {
      display: none;
    }
  }

  &.no-post-img {
    flex-wrap: wrap;

    &.category-news {
      .entry-hero {
        display: none;
      }

      .entry-excerpt {
        flex: 1 1 100%;
      }
    }

    .entry-header {
      flex: 1 1 100%;
    }
  }

  &.excerpted-post-list {

    @include media( $third-break ) {
      flex: 1 0 100%;
    }

    > * {

      @include media( $third-break ) {
        flex: 0 1 auto;
        order: 1;


        //max-width: flex-grid( 8 );
      }
    }


    .entry-header,
    .entry-excerpt {
      flex: 0 1 auto;

    }

    .entry-hero {
      margin-left: 0;

      @include media( $third-break ) {
        flex: 0 0 auto;
        order: 0;

        max-width: 150px;
        margin-right: flex-gutter();
      }
    }

    .entry-excerpt { display: block; }
  }

  .features-posts &,
  .news-posts &:first-of-type,
  .arts-posts &:first-of-type,
  .culture-posts &:first-of-type,
  .galleries-posts &:first-of-type,
  .latest-posts &:first-of-type,
  .popular-posts &:first-of-type,
  .events-posts &,
  .more_features-posts &,
  .related_posts &:first-of-type {
    @extend %featured-excerpt;
  }

  .archive.author & {
    @extend %small-excerpt;
  }

  .entry-header {
    flex: 1 1 flex-grid( 8 );
  }

  .entry-title {
    margin-bottom: 0.15em;
  }

  .entry-subhead {
    margin-bottom: 0.5em;
  }

  .entry-hero {
    flex: 1 1 flex-grid( 4 );
    margin-left: flex-gutter();
  }

  .entry-footer {
    .featured-event {
      display: block;
      padding: 7px 18px 3px;

      background-color: color( red );
      color: color( white );
    }
  }
}

// Singular
.single .site-main,
.singular .site-main,
.page .site-main {

  .hentry {
    @include media( $third-break ) {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: stretch;
      justify-content: space-between;
    }
  }

  .entry-header,
  .entry-content,
  .entry-footer {
    padding-left: flex-gutter( 4 );
    padding-right: flex-gutter( 4 );

    @include media( $third-break ) {
      padding-left: 0;
      padding-right: 0;
    }
  }

  .entry-header {
    @include media( $third-break ) {
      flex: 1 1 100%;
      order: 2;
      align-self: stretch;
    }

    @include media( $fifth-break ) {
      padding-left: flex-grid( 1 );
    }

    .sd-sharing-enabled {
      padding-top: 1em;
    }
  }

  .entry-hero {
    max-height: 90vh;
    margin-bottom: 1.5em;
    overflow: hidden;

    @include media( $third-break ) {
      flex: 1 1 100%;
      order: 1;
      align-self: stretch;
    }

    &.in-content-hero {
      display: block;
      max-height: calc( 500px + 3em );
      max-width: 500px;

      @include media( $less-than-wide ) {
        float: none;
        margin-left: auto;
        margin-right: auto;
      }

      @include media( $fifth-break ) {
        margin-top: 1em;
        margin-left: flex-grid(-1);
      }

      .hero-caption {
        margin-left: 0;
        margin-right: 0;

        text-align: left;

        .photo-credit {
          display: block;
          margin-left: 0;
        }
      }
    }

    .hero-caption {
      margin-left: flex-gutter();
      margin-right: flex-gutter();

      text-align: right;

      .photo-credit {
        display: inline-block;
        margin-left: 1em;

        color: color( grey );
      }
    }
  }

  .entry-title {
    margin-bottom: 0.15em;
  }

  .entry-subhead {
    margin-bottom: 0.5em;
  }

  .entry-content {
    @include media( $third-break ) {
      flex: 0 1 60%;
      order: 3;
    }

    @include media( $fifth-break ) {
      padding-left: flex-grid( 1 );
    }
  }

  .entry-content + .ad {
    @include media( $third-break ) {
      flex: 0 1 40%;
      order: 4;
      align-self: flex-start;

      //max-width: 300px;
      padding-top: 3em;
    }
  }

  .entry-footer:not( .widget .entry-footer ) {
    @include media( $third-break ) {
      flex: 0 1 60%;
      order: 5;
    }

    @include media( $fifth-break ) {
      padding-left: flex-grid( 1 );
    }

    .tags-links {
      display: block;
      padding-top: 1em;

      border-top: 1px solid color( red );
    }
  }

  .widget-area {
  }

  .format-gallery .entry-hero,
  .format-video .entry-hero {
    max-height: none;
  }

  .no-post-hero {

    .widget-area {

      @include media( $third-break ) {
        //margin-top: calc( 333px + 5em );
      }
    }
  }

  .hentry:not(.category-letters, .category-slant, .category-biz_beat, .category-spray-schedule, .category-pollution-update, .category-activist-alert ) {
    .entry-content {
      > p:first-child,
      > figure:first-child + p {

        &:first-letter {
          float: left;
          margin-right: flex-gutter( 8 );
          margin-top: 0.1em;
          margin-bottom: 0;

          @include media( $third-break ) {
            margin-right: flex-gutter(18);
          }
        }
      }
    }
  }
}
